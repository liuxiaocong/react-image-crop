!function(t){var e={};function n(i){if(e[i])return e[i].exports;var o=e[i]={i:i,l:!1,exports:{}};return t[i].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=t,n.c=e,n.d=function(t,e,i){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)n.d(i,o,function(e){return t[e]}.bind(null,o));return i},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=1)}([function(t,e){t.exports={lastDescriptionKey:"canvas_last_description",lastActionInfoKey:"canvas_last_action_info",lastImageDataKey:"canvas_last_image_data",lastImageNameKey:"canvas_last_image_name"}},function(t,e,n){var i,o=n(2),{lastDescriptionKey:a,lastActionInfoKey:l}=n(0),r=document.getElementById("imageContainer"),s=document.getElementById("debugContainer"),c=document.getElementById("generateButton"),d=document.getElementById("loadPrevious"),g=document.getElementById("backgroundImage"),u=document.getElementById("canvas"),m=document.getElementById("sizeControllerWrap"),h=document.getElementById("sizeController"),f=document.getElementById("sizeControlProgress"),y=document.getElementById("fileName");function p(t){s.innerHTML+="<p>"+t+"</p>"}localStorage.getItem(a)&&localStorage.getItem(l)&&(d.style.display="inline-block"),fileSelector.onchange=function(t){for(var e,n=t.target.files,a=0;a<n.length;++a)switch((e=n[a]).type){case"image/jpeg":case"image/png":case"image/gif":var l=new FileReader;return l.onload=function(t){var n=new Image;console.log(e),console.log(l),n.src=l.result,n.onload=function(){p("Loaded Image w/dimensions "+n.naturalWidth+" x "+n.naturalHeight),(i=o(g,u,n,r,m,h,f,d,y,l.result,e.name)).start()}},void l.readAsDataURL(e);default:p("not a valid Image file :"+e.name)}},c.onclick=function(t){p("GENERATE BUTTON CLICKED!! Should this do something else?"),i&&p(i.showDescription())},d.onclick=function(t){if(fileSelector.value="",i)i.restoreLastDescription();else{const t=localStorage.getItem(a)&&JSON.parse(localStorage.getItem(a)),e=localStorage.getItem(l)&&JSON.parse(localStorage.getItem(l));if(!e||!t)return;let n=new Image;n.src=e.imageData,n.onload=function(){p("Loaded Image w/dimensions "+n.naturalWidth+" x "+n.naturalHeight),(i=o(g,u,n,r,m,h,f,d,y,e.imageData,e.imageName||"")).start(),i.restoreLastDescription()}}},p("Test application ready")},function(t,e,n){"use strict";n.r(e);var{lastDescriptionKey:i,lastActionInfoKey:o}=n(0);e.default=((t,e,n,a,l,r,s,c,d,g,u)=>{const m=e.getContext("2d"),h={},f={},y={lastDescription:null,lastActionInfo:null};try{y.lastDescription=localStorage.getItem(i)&&JSON.parse(localStorage.getItem(i)),y.lastActionInfo=localStorage.getItem(o)&&JSON.parse(localStorage.getItem(o))}catch(t){console.error(t)}let p=g,I=n,v=I.naturalWidth,S=I.naturalHeight,x=v>S,w=1,B=1,D=(5+w-1)/300,A={},E=!1,b=!1;return{start:function(){t.src=I.src,this.updateFileName(),this.initBackgroundImageSizeAndPosition(),this.initSizeControl(),a.addEventListener("mousedown",t=>{b=!0,h.x=t.clientX,h.y=t.clientY,h.imageX=A.x,h.imageY=A.y}),a.addEventListener("mouseup",t=>{b=!1}),a.addEventListener("mousemove",t=>{if(!b)return;const e=t.clientX-h.x,n=t.clientY-h.y;let i=h.imageX+e,o=h.imageY+n;this.updateBackgroundImageSizeAndPosition(i,o,A.width,A.height)})},updateFileName:function(){d.innerText=u||"No File Chosen"},initSizeControl:function(){w=A.orginalHeight/300>A.orginalWidth/450?1/(A.orginalWidth/450):1/(A.orginalHeight/300),B=(1-w)/(D=(5+w)/300),r.style.left=B+"px",s.style.width=B/300*100+"%",l.addEventListener("mousedown",t=>{E=!0,f.left=r.style.left?parseInt(r.style.left):0,f.x=t.clientX,f.y=t.clientY}),l.addEventListener("mouseup",t=>{E=!1}),l.addEventListener("mousemove",t=>{if(!E)return;const e=t.clientX-f.x;let n=f.left+e;n<0&&(n=0),n>300&&(n=300),r.style.left=n+"px",s.style.width=n/300*100+"%",this.updateImageSizeWithControl(n)})},updateImageSizeWithControl:function(t){let e=1+(t-B)*D;e<w&&(e=w),e>5&&(e=5);let n=A.orginalWidth*e,i=A.orginalHeight*e;n<450&&(n=450,i=A.orginalHeight/A.orginalWidth*n),i<300&&(i=300,n=A.orginalWidth/A.orginalHeight*i);const o=(n-A.width)/2,a=(i-A.height)/2,l=A.x-o,r=A.y-a;this.updateBackgroundImageSizeAndPosition(l,r,n,i)},initBackgroundImageSizeAndPosition:function(){if(x){const t=v/S*600;A.orginalWidth=t,A.orginalHeight=600,this.updateBackgroundImageSizeAndPosition(0,0,t,600)}else{const t=S/v*600;A.orginalWidth=600,A.orginalHeight=t,this.updateBackgroundImageSizeAndPosition(0,0,600,t)}},updateBackgroundImageSizeAndPosition:function(e,n,i,o){const a=525-A.width,l=450-A.height;let r=e,s=n;r>75&&(r=75),s>150&&(s=150),r<a&&(r=a),s<l&&(s=l),t.style.left=r+"px",t.style.top=s+"px",t.style.width=i+"px",t.style.height=o+"px",A=Object.assign(A,{x:r,y:s,width:i,height:o}),this.updateCanvasDisplay()},updateCanvasDisplay:function(){const e=75-A.x,n=150-A.y;m.drawImage(I,-e,-n,t.width,t.height)},setBodyScrollEnable:function(t){document.body.style.overflow=t?"auto":"hidden"},convertBackgroundImageInfoToInch:function(){return{width:(3.2*A.width/96).toFixed(2),height:(3.2*A.height/96).toFixed(2),x:(3.2*(75-A.x)/96).toFixed(2),y:(3.2*(150-A.y)/96).toFixed(2)}},convertInchToBackgroundImageInfo:function(t,e,n,i){return{width:96*t/3.2,height:96*e/3.2,x:75-96*n/3.2,y:150-96*i/3.2}},showDescription:function(){const t=this.convertBackgroundImageInfoToInch(),e={canvas:{width:15,height:10,photo:{id:u,width:t.width,height:t.height,x:t.x,y:t.y}}},n={imageData:p,imageName:u,sizeControllerLeft:r.style.left,sizeControlProgressWidth:s.style.width};return y.lastDescription=e,y.lastActionInfo=n,c.style.display="inline-block",localStorage.setItem(i,JSON.stringify(e)),localStorage.setItem(o,JSON.stringify(n)),e},restoreLastDescription:function(){if(y.lastDescription&&y.lastActionInfo){let t=new Image;t.src=y.lastActionInfo.imageData,p=y.lastActionInfo.imageData;let e=this;t.onload=function(){I=t,u=y.lastActionInfo.imageName||"",v=I.naturalWidth,S=I.naturalHeight,x=v>S,e.start();const n=y.lastDescription.canvas.photo,i=e.convertInchToBackgroundImageInfo(n.width,n.height,n.x,n.y);e.updateBackgroundImageSizeAndPosition(i.x,i.y,i.width,i.height),r.style.left=y.lastActionInfo.sizeControllerLeft,s.style.width=y.lastActionInfo.sizeControlProgressWidth}}}}})}]);